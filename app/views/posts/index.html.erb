
<div class="jumbotron">
  <div class="container">
    <h1>Hello, world!</h1>
    <p>This is an instagram replica </p>
    <%= link_to 'Sign Up', new_user_registration_path, class: 'btn btn-primary btn-lg' %>
  </div>
</div>

<div class='container' >

	<% if @all_posts.any? %>
		<div class='row'>
			<% @all_posts.each do |post| %>
		   		<div class='col-md-4'>
		   			<div class="panel panel-default">
						<div class="panel panel-default">
							<div class="panel-body">
								<div class='post' data-id='<%= post.id %>' >
							  		<%= image_tag post.picture.url(:medium), class: 'uploaded-pic' %>
							  		<%= post.description %><br/>
							  		<p>
							  		<% post.tags.each do |tag| %>
							  			<%= link_to tag.name, '#' %>
							  		<%end%>
							  		</p>
						  			<ul>
						  				<% post.comments.each do |comment| %>
						  					<li> <%= comment.comment %> </li>
						  				<% end %>
						  			</ul>
						  			<% if user_signed_in? %>
						  				<%= link_to "Add comment", new_post_comment_path(post), class: "btn btn-lg btn-default" %>
						  			<% end %>
						  			<% if post.user == current_user %>
						  				<%= link_to "Delete post", post_path(post), method: :delete, class: 'btn btn-lg btn-danger' %>
						  				<%= link_to "❤ #{post.likes.count}", post_likes_path(post), class: 'like-btn' %>
						  				<%= link_to 'Show More', '#', class: 'btn btn-lg btn-info', data: {toggle: 'modal', target: ".image-modal-#{post.id}"} %>
						  			<% end %>
					  			</div>	    
							</div>
						</div>
					</div>
			  	</div>
				<div class="modal fade image-modal-<%= post.id %>">
				    <div class="modal-dialog modal-lg">
					    <div class="modal-content">
					        <div class="modal-header">
						        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
						        <h4 class="modal-title" id="myModalLabel"><%= post.description %> </h4>
						        <div class='modal-body'>
						        	<%= image_tag post.picture.url%>
						        </div>
						    </div>
					    </div>
				  	</div>
				</div>
			<% end %>
		</div>
	<% else %>
  		<Br/><br/>
  			No posts have been made
  		<Br/><br/>  
	<% end %>
	
	<h4>0 comments</h4>

</div>

<div>

	<%= form_for @post, html: { multipart: true } do |f| %>
		
		<%= f.label :picture %>
		<%= f.file_field :picture %>

		<%= f.label :description %> 
		<%= f.text_area :description %>

		<%= f.label :tag_names, 'Tags' %>
		<%= f.text_field :tag_names %>
		
		<%= f.button "Upload", action: "create", class: "btn btn-success"%>

	<% end %>

</div>

